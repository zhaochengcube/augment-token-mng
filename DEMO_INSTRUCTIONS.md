# 演示说明

## 当前状态

✅ **服务端已启动**: http://localhost:3000  
✅ **ATM 客户端已启动**: http://localhost:1420

两个服务都在后台运行中，可以直接开始测试！

## 立即开始演示

### 第一步：登录管理后台

1. 打开浏览器（如果还没打开）
2. 访问：http://localhost:3000
3. 输入密码：`admin123`
4. 点击"登录"

### 第二步：添加测试 Session

1. 点击 "Session 管理" 标签
2. 点击 "添加 Session" 按钮
3. 在 "Auth Session" 输入框中粘贴：
   ```
   test_session_demo_20251025
   ```
4. 在 "备注" 输入框中填写：
   ```
   演示账号
   ```
5. 点击 "添加" 按钮
6. 应该看到 Session 出现在列表中

### 第三步：生成卡密

1. 点击 "卡密管理" 标签
2. 点击 "生成卡密" 按钮
3. 在弹出的对话框中：
   - **选择 Session**: 选择刚才添加的 "演示账号"
   - **卡密类型**: 选择 "一次性"
   - **生成数量**: 输入 `1`
   - **过期时间**: 留空（不设置过期）
4. 点击 "生成" 按钮
5. 在成功对话框中，**复制显示的 UUID 卡密**
   - 格式类似：`550e8400-e29b-41d4-a716-446655440000`
   - 点击 "复制全部" 按钮

### 第四步：在 ATM 中兑换卡密

1. 打开新标签页访问：http://localhost:1420
2. 在 ATM 主界面，点击 "Token 列表" 按钮
3. 在 Token 列表界面，找到并点击 **"卡密兑换"** 按钮（绿色按钮，带钥匙图标）
4. 在弹出的对话框中：
   - **服务器地址**: 保持默认 `http://localhost:3000`
   - **卡密代码**: 粘贴刚才复制的 UUID
5. 点击 "兑换" 按钮
6. 观察进度提示：
   - "正在兑换卡密..."
   - "卡密兑换成功，正在导入 Session..."
7. 等待成功提示：
   - "兑换成功！Session 已导入"
8. 对话框会在 2 秒后自动关闭
9. 检查 Token 列表，应该看到新导入的 Token

### 第五步：验证卡密已使用

1. 返回管理后台（http://localhost:3000）
2. 在 "卡密管理" 标签中
3. 找到刚才使用的卡密
4. 查看 "使用情况" 列，应该显示 `1/1`（已用完）
5. 尝试再次在 ATM 中兑换同一卡密
6. 应该看到错误提示："卡密使用次数已达上限"

## 测试其他功能

### 测试多次使用卡密

1. 在管理后台生成新卡密
2. 卡密类型选择 "多次使用"
3. 最大使用次数设置为 `3`
4. 生成后，可以兑换 3 次
5. 每次兑换后，使用情况会更新（1/3, 2/3, 3/3）

### 测试批量生成

1. 点击 "生成卡密"
2. 生成数量设置为 `5`
3. 点击生成
4. 应该看到 5 个不同的 UUID 卡密
5. 可以全部复制或单独复制

### 测试卡密管理

**禁用卡密**:
1. 在卡密列表中找到未使用的卡密
2. 点击 "禁用" 按钮
3. 状态变为 "禁用"
4. 尝试兑换该卡密，应该失败

**启用卡密**:
1. 点击 "启用" 按钮
2. 状态变为 "启用"
3. 现在可以正常兑换

**删除卡密**:
1. 点击 "删除" 按钮
2. 确认删除
3. 卡密从列表中消失

### 测试 Session 管理

**删除 Session**:
1. 在 "Session 管理" 中选择一个 Session
2. 点击 "删除" 按钮
3. 确认删除
4. Session 和所有关联的卡密都会被删除（级联删除）

## 快速测试脚本

如果想快速生成测试数据，可以：

1. 添加 3 个 Session
2. 为每个 Session 生成 2 个卡密
3. 兑换其中几个卡密
4. 观察使用情况统计

## 故障排查

### 问题：服务端无法访问

**检查**:
```bash
# 查看服务端进程
Get-Process | Where-Object {$_.ProcessName -like "*node*"}

# 重启服务端
cd ../augment-session-server
npm run dev
```

### 问题：ATM 无法访问

**检查**:
```bash
# 查看 ATM 进程
Get-Process | Where-Object {$_.ProcessName -like "*vite*"}

# 重启 ATM
cd augment-token-mng-main
npm run dev
```

### 问题：兑换失败

**检查清单**:
- [ ] 服务端是否运行（http://localhost:3000）
- [ ] 卡密是否完整复制
- [ ] 卡密是否已被使用
- [ ] 卡密是否已禁用
- [ ] 卡密是否已过期

## 演示要点

### 展示亮点

1. **简单易用** - 只需 3 步即可完成兑换
2. **实时反馈** - 进度提示和错误处理
3. **灵活配置** - 支持多种卡密类型
4. **批量操作** - 一次生成多个卡密
5. **安全可靠** - 使用次数限制和过期控制
6. **美观界面** - Tailwind CSS 美化

### 演示流程建议

1. **开场** - 展示两个界面（管理后台 + ATM）
2. **管理端** - 演示添加 Session 和生成卡密
3. **用户端** - 演示在 ATM 中兑换
4. **验证** - 展示卡密使用情况更新
5. **高级功能** - 展示批量生成、多次使用等

## 数据清理

演示结束后，如果需要清理数据：

```bash
# 删除数据库
rm ../augment-session-server/data/sessions.db

# 重新初始化
cd ../augment-session-server
npm run init-db
```

## 下一步

演示完成后，可以：
1. 阅读 [QUICK_START.md](QUICK_START.md) 了解详细使用
2. 阅读 [INTEGRATION_GUIDE.md](INTEGRATION_GUIDE.md) 了解技术细节
3. 阅读 [PROJECT_SUMMARY.md](PROJECT_SUMMARY.md) 了解项目概况
4. 开始实际使用真实的 auth_session 数据

## 演示检查清单

开始演示前确认：
- [ ] 服务端正常运行（http://localhost:3000）
- [ ] ATM 正常运行（http://localhost:1420）
- [ ] 浏览器已打开两个标签页
- [ ] 已准备好演示用的 Session 数据
- [ ] 已了解完整流程

**准备就绪，开始演示！** 🎬

