@import "tailwindcss";

@theme {
  --color-page: var(--page);
  --color-surface: var(--surface);
  --color-muted: var(--muted);
  --color-hover: var(--hover);
  --color-border: var(--border);
  --color-border-strong: var(--border-strong);
  --color-text: var(--text);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);
  --color-text-inverse: var(--text-inverse);
  --color-accent: var(--accent);
  --color-accent-hover: var(--accent-hover);
  --color-accent-muted: var(--accent-muted);
  --color-accent-tech: color-mix(in srgb, var(--accent) 15%, transparent);
  --color-accent-tech-hover: color-mix(in srgb, var(--accent) 22%, transparent);
  --color-border-accent-tech: color-mix(in srgb, var(--accent) 30%, transparent);
  --color-border-accent-tech-hover: color-mix(in srgb, var(--accent) 45%, transparent);
  --color-success: var(--success);
  --color-success-muted: var(--success-muted);
  --color-success-tech: color-mix(in srgb, var(--success) 15%, transparent);
  --color-success-tech-hover: color-mix(in srgb, var(--success) 22%, transparent);
  --color-border-success-tech: color-mix(in srgb, var(--success) 30%, transparent);
  --color-border-success-tech-hover: color-mix(in srgb, var(--success) 45%, transparent);
  --color-warning: var(--warning);
  --color-warning-muted: var(--warning-muted);
  --color-warning-tech: color-mix(in srgb, var(--warning) 15%, transparent);
  --color-warning-tech-hover: color-mix(in srgb, var(--warning) 22%, transparent);
  --color-border-warning-tech: color-mix(in srgb, var(--warning) 30%, transparent);
  --color-border-warning-tech-hover: color-mix(in srgb, var(--warning) 45%, transparent);
  --color-danger: var(--danger);
  --color-danger-muted: var(--danger-muted);
  --color-danger-hover: var(--danger-hover);
  --color-danger-tech: color-mix(in srgb, var(--danger) 15%, transparent);
  --color-danger-tech-hover: color-mix(in srgb, var(--danger) 22%, transparent);
  --color-border-danger-tech: color-mix(in srgb, var(--danger) 30%, transparent);
  --color-border-danger-tech-hover: color-mix(in srgb, var(--danger) 45%, transparent);
  
  --color-backdrop: rgba(0, 0, 0, 0.4);

  --shadow-accent: 0 0 12px color-mix(in srgb, var(--accent) 45%, transparent);
  --shadow-success: 0 0 12px color-mix(in srgb, var(--success) 45%, transparent);
  --shadow-warning: 0 0 12px color-mix(in srgb, var(--warning) 45%, transparent);
  --shadow-danger: 0 0 12px color-mix(in srgb, var(--danger) 45%, transparent);
  --shadow-muted: 0 0 12px color-mix(in srgb, var(--text-muted) 30%, transparent);
}

:root {
  color-scheme: light;

  --font-sans: system-ui;
  --font-mono: ui-monospace;

  --page: #fafafa;
  --surface: #ffffff;
  --surface-elevated: #ffffff;
  --muted: #f5f5f5;
  --hover: #f0f0f0;
  --active: #e8e8e8;
      
  --text: #171717;
  --text-secondary: #525252;
  --text-muted: #a3a3a3;
  --text-inverse: #ffffff;
      
  --border: #e5e5e5;
  --border-muted: #f0f0f0;
  --border-strong: #d4d4d4;

  /* shadcn/ui 黑色系配色方案 (Zinc) - 浅色模式 */
  --accent: #18181b;           /* zinc-900 */
  --accent-hover: #27272a;     /* zinc-800 */
  --accent-muted: #f4f4f5;     /* zinc-100 */
  /* 原始蓝色配色 (备份)
  --accent: #2563eb;
  --accent-hover: #1d4ed8;
  --accent-muted: #dbeafe;
  */
  --success: #16a34a;
  --success-muted: #dcfce7;
  --warning: #ca8a04;
  --warning-muted: #fef9c3;
  --danger: #dc2626;
  --danger-hover: #b91c1c;
  --danger-muted: #fee2e2;
}

[data-theme='dark'] {
  color-scheme: dark;
  --page: #0a0a0a;
  --surface: #171717;
  --surface-elevated: #1f1f1f;
  --muted: #262626;
  --hover: #2a2a2a;
  --active: #333333;
      
  --text: #fafafa;
  --text-secondary: #a3a3a3;
  --text-muted: #737373;
  --text-inverse: #171717;
      
  --border: #2e2e2e;
  --border-muted: #262626;
  --border-strong: #404040;

  /* shadcn/ui 黑色系配色方案 (Zinc) - 深色模式 */
  --accent: #fafafa;           /* zinc-50 */
  --accent-hover: #e4e4e7;     /* zinc-200 */
  --accent-muted: #27272a;     /* zinc-800 */
  /* 原始蓝色配色 (备份)
  --accent: #60a5fa;
  --accent-hover: #93c5fd;
  --accent-muted: #1e3a5f;
  */

  --success: #4ade80;
  --success-muted: #14532d;
  --warning: #facc15;
  --warning-muted: #422006;
  --danger: #f87171;
  --danger-muted: #450a0a;
}

@layer base {
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* 全局滚动条样式 */
  *::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
  }

  *::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 4px;
  }

  *::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
  }

  *::-webkit-scrollbar-corner {
    background: transparent;
  }

  body {
    @apply font-sans;
    height: 100vh;
    overflow: hidden;
    background: var(--page);
    color: var(--text);
    font-size: 14px;
    transition: background-color 0.3s ease, color 0.3s ease;
    font-synthesis-weight: none;
  }
}

@layer components {
  .btn {
    @apply inline-flex cursor-pointer items-center justify-center gap-2 rounded-lg border border-transparent px-4 py-2 text-[13px] font-medium leading-[1.5] transition;
  }

  .btn:focus-visible {
    @apply outline-2 outline-offset-2 outline-accent;
  }

  .btn:disabled,
  .btn[aria-disabled='true'] {
    @apply cursor-not-allowed opacity-60;
  }

  .btn--primary {
    @apply bg-accent border-accent text-text-inverse;
  }

  .btn--primary:hover {
    @apply bg-accent-hover border-accent-hover;
  }

  .btn--secondary {
    @apply bg-surface border-border text-text;
  }

  .btn--secondary:hover {
    @apply bg-hover border-border-strong;
  }

  .btn--ghost {
    @apply border-transparent bg-transparent text-text-secondary;
  }

  .btn--ghost:hover {
    @apply bg-hover text-text;
  }

  .btn--danger {
    @apply bg-danger border-danger text-text-inverse;
  }

  .btn--danger:hover {
    @apply bg-danger-hover border-danger-hover;
  }

  .btn--sm {
    @apply px-3 py-1 text-[12px];
  }

  .btn--lg {
    @apply text-[14px];
  }

  .btn-spinner {
    @apply h-4 w-4 rounded-full border-2 border-current/30 border-t-current animate-spin;
  }

  .btn-spinner--xs {
    @apply h-3 w-3;
  }

  .btn-spinner--sm {
    @apply h-3.5 w-3.5;
  }

  .btn-spinner--lg {
    @apply h-5 w-5;
  }

  .btn--icon {
    @apply h-8 w-8 p-0;
  }

  .btn--icon-sm {
    @apply h-6 w-6 p-0;
  }

  .btn--dashed {
    @apply border-dashed border-border text-text-muted bg-transparent opacity-0;
  }

  .btn--dashed:hover {
    @apply border-accent text-accent bg-accent/10 opacity-100;
  }

  .group:hover .btn--dashed,
  .card:hover .btn--dashed,
  tr:hover .btn--dashed {
    @apply opacity-100;
  }

  .btn-tech-accent {
    @apply bg-accent-tech border-border-accent-tech text-accent;
  }

  .btn-tech-accent:hover {
    @apply bg-accent-tech-hover border-border-accent-tech-hover shadow-accent;
  }

  .btn-tech-success {
    @apply bg-success-tech border-border-success-tech text-success;
  }

  .btn-tech-success:hover {
    @apply bg-success-tech-hover border-border-success-tech-hover shadow-success;
  }

  .btn-tech-warning {
    @apply bg-warning-tech border-border-warning-tech text-warning;
  }

  .btn-tech-warning:hover {
    @apply bg-warning-tech-hover border-border-warning-tech-hover shadow-warning;
  }

  .btn-tech-danger {
    @apply bg-danger-tech border-border-danger-tech text-danger;
  }

  .btn-tech-danger:hover {
    @apply bg-danger-tech-hover border-border-danger-tech-hover shadow-danger;
  }

  .v-tooltip {
    @apply font-mono fixed z-[10000] rounded-lg border border-border bg-surface px-3 py-2 text-[12px] font-semibold leading-[1.4] text-text opacity-0 shadow-md transition-opacity max-w-xs;
    pointer-events: none;
    white-space: normal;
    word-break: break-word;
  }

  .badge {
    @apply inline-flex items-center gap-1 rounded-lg border border-transparent px-2.5 py-1 text-[11px] font-semibold bg-muted text-text-secondary border-border;
  }

  .badge--success {
    @apply bg-success-muted text-success;
  }

  .badge--warning {
    @apply bg-warning-muted text-warning;
  }

  .badge--danger {
    @apply bg-danger-muted text-danger;
  }

  .badge--accent {
    @apply bg-accent-muted text-accent;
  }

  .badge--accent-tech {
    @apply bg-accent-tech text-accent border-border-accent-tech;
  }

  .badge--success-tech {
    @apply bg-success-tech text-success border-border-success-tech;
  }

  .badge--warning-tech {
    @apply bg-warning-tech text-warning border-border-warning-tech;
  }

  .badge--danger-tech {
    @apply bg-danger-tech text-danger border-border-danger-tech;
  }

  .badge--sm {
    @apply px-1.5 py-0.5 text-[10px];
  }

  .badge--md {
    @apply px-3 py-1.5 text-[12px];
  }

  .badge--lg {
    @apply px-4 py-2 text-[13px] rounded-lg;
  }

  .badge.clickable:hover {
    @apply cursor-pointer;
  }

  .badge.editable {
    @apply transition-all duration-150;
    background: color-mix(in srgb, var(--tag-color, var(--tag-default)) 20%, transparent);
    border-color: color-mix(in srgb, var(--tag-color, var(--tag-default)) 45%, transparent);
    color: color-mix(in srgb, var(--tag-color, var(--tag-default)) 60%, var(--text));
  }

  .badge.editable:hover {
    @apply cursor-pointer;
    background: color-mix(in srgb, var(--tag-color, var(--tag-default)) 30%, transparent);
    border-color: color-mix(in srgb, var(--tag-color, var(--tag-default)) 60%, transparent);
  }

  .text-copyable {
    @apply inline-flex items-center cursor-pointer max-w-full;
    width: fit-content;
  }

  .text-copyable__content {
    @apply text-sm font-semibold text-text select-none truncate transition-colors duration-200;
  }

  .text-copyable:hover .text-copyable__content {
    @apply text-accent;
  }

  .text-copyable--muted {
    @apply text-text-muted opacity-60;
  }

  .text-meta {
    @apply text-[11px] text-text-muted font-mono opacity-70;
  }

  .status-dot {
    @apply h-1.5 w-1.5 rounded-lg;
    background: currentColor;
  }

  .card {
    @apply rounded-lg border border-border bg-surface p-5 transition;
    position: relative;
  }

  /* 下拉菜单展开时提升整个卡片的层级 */
  .card:has(.dropdown-menu) {
    z-index: 100;
  }

  .card:hover {
    @apply -translate-y-1
  }

  .card--lift:hover {
    @apply cursor-pointer -translate-y-1 border-transparent bg-hover shadow-[0_0_0_2px_var(--color-accent)];
  }

  .card.selected {
    @apply border-transparent shadow-[0_0_0_2px_var(--color-accent)];
  }

  .selection-checkbox {
    @apply absolute top-3 left-3 z-[15] opacity-0 transition-all duration-200;
    transform: scale(0.85);
  }

  .selection-checkbox.visible {
    @apply opacity-100;
    transform: scale(1);
  }

  .group:hover .selection-checkbox,
  .card:hover .selection-checkbox,
  tr:hover .selection-checkbox {
    @apply opacity-100;
    transform: scale(1);
  }

  .checkbox-inner {
    @apply w-5 h-5 rounded-md border-[1.5px] border-border bg-surface flex items-center justify-center cursor-pointer transition-all duration-200;
  }

  .checkbox-inner svg {
    display: block;
  }

  .checkbox-inner:hover {
    @apply border-accent;
    background: color-mix(in srgb, var(--accent) 10%, transparent);
    box-shadow: 0 0 8px var(--tech-glow-primary);
  }

  .checkbox-inner.checked {
    @apply bg-accent border-transparent text-text-inverse;
    box-shadow: 0 0 10px var(--tech-glow-primary);
  }

  .input {
    @apply w-full rounded-lg border border-border bg-surface px-3 py-2 text-[13px] text-text transition;
  }

  .input:hover {
    @apply border-border-strong;
  }

  .input:focus {
    outline: none;
    border-color: var(--accent);
  }

  .input::placeholder {
    color: var(--text-muted);
  }

  .label {
    @apply mb-1 block text-[12px] font-medium text-text-secondary;
  }

  .form-group {
    @apply mb-4;
  }

  .table-container {
    @apply overflow-auto border border-border bg-surface;
  }

  .table {
    @apply w-full border-collapse;
  }

  .table th {
    @apply bg-muted px-4 py-3 text-left text-[11px] font-semibold uppercase tracking-[0.5px] text-text-muted;
    border-bottom: 1px solid var(--border);
  }

  .table td {
    @apply px-4 py-3 text-[13px] text-text;
    border-bottom: 1px solid var(--border-muted);
  }

  .modal-overlay {
    @apply fixed inset-0 z-[1000] flex items-center justify-center bg-backdrop p-6;
  }

  .modal {
    @apply w-full max-w-[480px] overflow-visible rounded-lg border border-border bg-surface;
    box-shadow: var(--shadow-lg);
  }

  .modal-header {
    @apply flex items-center justify-between border-b border-border px-5 py-4;
  }

  .modal-title {
    @apply text-[16px] font-semibold text-text;
  }

  .modal-body {
    @apply px-5 py-4;
  }

  .modal-body-scroll {
    @apply max-h-[65vh] overflow-y-auto;
  }

  .modal-footer {
    @apply flex items-center justify-end gap-2 border-t border-border rounded-b-lg bg-muted px-5 py-3;
  }

  /* 下拉菜单容器 */
  .dropdown {
    @apply relative inline-block;
  }

  /* 下拉菜单内容 */
  .dropdown-menu {
    @apply absolute right-0 mt-1 min-w-[180px] rounded-lg border border-border bg-surface p-1 shadow-md;
    z-index: 9999;
  }

  /* 下拉菜单尺寸变体 */
  .dropdown-menu--medium {
    min-width: 200px;
  }

  .dropdown-menu--wide {
    min-width: 220px;
    max-width: 320px;
  }

  .dropdown-menu--xwide {
    min-width: 280px;
  }

  /* 下拉菜单位置变体 */
  .dropdown-menu--left {
    left: 0;
    right: auto;
  }

  /* 下拉菜单内边距变体 */
  .dropdown-menu--flush {
    padding: 0;
  }

  /* 下拉菜单项 */
  .dropdown-item {
    @apply flex w-full items-center gap-2 rounded-lg border-0 bg-transparent px-3 py-2 text-left text-[13px] text-text transition;
  }

  .dropdown-item:hover {
    @apply bg-hover;
  }

  .dropdown-item--danger {
    @apply text-danger;
  }

  .dropdown-item--danger:hover {
    @apply bg-danger-hover;
  }

  /* 表格行：展开下拉菜单时提升层级 */
  tr:has(.dropdown-menu) {
    position: relative;
    z-index: 100;
  }

  /* 下拉菜单触发器容器：展开时提升层级 */
  .dropdown:has(.dropdown-menu) {
    z-index: 9999;
  }

}
